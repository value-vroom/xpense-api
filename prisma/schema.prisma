// database
datasource db {
    provider = "sqlite"
    url      = "file:database.db"
}

// generator
generator client {
    provider             = "prisma-client-py"
    interface            = "sync"
    recursive_type_depth = 5
}

// data models
model User {
    username           String        @id @unique
    email              String        @unique
    full_name          String
    hashed_password    String
    profile_image_name String
    profile_image      Image         @relation(fields: [profile_image_name], references: [name])
    GroupMember        GroupMember[]
}

model Token {
    access_token String @id
    token_type   String
}

model TokenData {
    username String @id
}

model Image {
    name String @id
    data Bytes
    User User[]
}

model Group {
    id          Int           @id @default(autoincrement())
    name        String
    description String
    GroupMember GroupMember[]
}

model GroupMember {
    group    Group   @relation(fields: [group_id], references: [id])
    user     User    @relation(fields: [username], references: [username])
    group_id Int
    username String
    is_owner Boolean @default(false)

    @@id([group_id, username])
}
